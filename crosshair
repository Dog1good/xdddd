-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- Crosshair Variables
local screenGui = nil
local crosshair = nil
local rotation = 0
local renderConnection = nil

-- Crosshair Creation Function
local function CreateCrosshair()
    local mouse = LocalPlayer:GetMouse()
    
    -- Remove old crosshair if exists
    if screenGui then
        screenGui:Destroy()
    end
    
    -- Create ScreenGui
    screenGui = Instance.new("ScreenGui")
    screenGui.Name = "CrosshairGui"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = LocalPlayer.PlayerGui
    
    -- Create Frame for crosshair
    crosshair = Instance.new("Frame")
    crosshair.Name = "Crosshair"
    crosshair.Size = UDim2.new(0, 40, 0, 40)
    crosshair.Position = UDim2.new(0, mouse.X, 0, mouse.Y)
    crosshair.AnchorPoint = Vector2.new(0.5, 0.5)
    crosshair.BackgroundTransparency = 1
    crosshair.Parent = screenGui
    
    -- Vertical bar
    local vertical = Instance.new("Frame")
    vertical.Name = "Vertical"
    vertical.Size = UDim2.new(0, 4, 1, 0)
    vertical.Position = UDim2.new(0.5, 0, 0, 0)
    vertical.AnchorPoint = Vector2.new(0.5, 0)
    vertical.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    vertical.BorderSizePixel = 0
    vertical.Parent = crosshair
    
    local outline1 = Instance.new("UIStroke")
    outline1.Color = Color3.fromRGB(0, 0, 0)
    outline1.Thickness = 1
    outline1.Parent = vertical
    
    -- Horizontal bar
    local horizontal = Instance.new("Frame")
    horizontal.Name = "Horizontal"
    horizontal.Size = UDim2.new(1, 0, 0, 4)
    horizontal.Position = UDim2.new(0, 0, 0.5, 0)
    horizontal.AnchorPoint = Vector2.new(0, 0.5)
    horizontal.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    horizontal.BorderSizePixel = 0
    horizontal.Parent = crosshair
    
    local outline2 = Instance.new("UIStroke")
    outline2.Color = Color3.fromRGB(0, 0, 0)
    outline2.Thickness = 1
    outline2.Parent = horizontal
    
    -- Hide default mouse cursor
    mouse.Icon = "rbxasset://SystemCursors/Blank"
    
    rotation = 0
end

-- Destroy Crosshair Function
local function DestroyCrosshair()
    if renderConnection then
        renderConnection:Disconnect()
        renderConnection = nil
    end
    
    if screenGui then
        screenGui:Destroy()
        screenGui = nil
        crosshair = nil
    end
    
    -- Restore default cursor
    local mouse = LocalPlayer:GetMouse()
    mouse.Icon = ""
end

-- Toggle function
local function ToggleCrosshair(Value)
    _G.crosshair = Value
    
    if _G.crosshair then
        CreateCrosshair()
        
        -- Start render loop
        local mouse = LocalPlayer:GetMouse()
        renderConnection = RunService.RenderStepped:Connect(function(dt)
            if not _G.crosshair or not crosshair then
                return
            end
            
            -- Update position to follow mouse
            crosshair.Position = UDim2.new(0, mouse.X, 0, mouse.Y)
            
            -- Spinning animation (2 rotations per second)
            rotation = rotation + (2 * 360 * dt)
            if rotation >= 360 then
                rotation = rotation - 360
            end
            crosshair.Rotation = rotation
        end)
    else
        DestroyCrosshair()
    end
end

-- GUI Toggle
LeftGroupBox:AddToggle('CrosshairToggle', {
    Text = 'Crosshair',
    Default = false,
    Tooltip = 'Toggles spinning crosshair',
    Callback = ToggleCrosshair
})
